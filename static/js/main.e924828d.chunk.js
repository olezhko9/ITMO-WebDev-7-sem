(this.webpackJsonplab_2=this.webpackJsonplab_2||[]).push([[0],{218:function(e,t,a){e.exports=a(297)},223:function(e,t,a){},225:function(e,t,a){},293:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=(a(223),a(41)),l=a.n(c),s=a(63),m=a(37),u=a(26),p=a(54),h=a(55),d=a(62),y=(a(225),a(88)),v=a(158),E=a(167),f=a(173),b=a(165),g=a(95),C=a(89),w=a(200),O=a(168),j=a(72),k=a(75),S=a.n(k),D=a(149),x=a.n(D),F=a(109),L=a(207);var I=function(){return r.a.createElement(F.Grid,{container:!0,justify:"center"},r.a.createElement(F.Grid,{container:!0,justify:"center"},r.a.createElement(S.a,{variant:"h5",component:"h3",align:"center",gutterBottom:!0},"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f")),r.a.createElement(F.Grid,{container:!0,justify:"center"},r.a.createElement(L.RingLoader,{sizeUnit:"px",size:60,color:"#123abc",loading:!0})))};a(293);function W(e){var t=e.cityWeatherData;if(!t||t&&t.isLoading)return r.a.createElement(I,null);if(t&&200!=t.cod)return"onFetchError"in e&&e.onFetchError(),r.a.createElement("p",null,"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043f\u043e\u0433\u043e\u0434\u0435...");if(t&&200==t.cod){var a=Math.round(t.main.temp-273.15);return r.a.createElement(f.a,{container:!0,direction:e.isFavorite?"column":"row",spacing:4,className:"WeatherCard ".concat(e.isFavorite?"isFavorite":"")},r.a.createElement(f.a,{container:!0,item:!0,xs:12,md:e.isFavorite?12:6,direction:e.isFavorite?"row":"column",alignItems:"center",className:"weather-main"},r.a.createElement(f.a,{container:!0,item:!0,sm:!!e.isFavorite&&4,justify:"space-between"},r.a.createElement(S.a,{variant:"h5",component:"h2"},r.a.createElement("b",null,t.name)),r.a.createElement(w.a,{smUp:!0},e.isFavorite&&r.a.createElement(O.a,{color:"primary",size:"small",onClick:e.onRemoveCityClick.bind(this,e.cityWeatherData.name)},r.a.createElement(x.a,null)))),r.a.createElement(f.a,{item:!0,container:!0,sm:!!e.isFavorite&&7,alignItems:"center",justify:"space-evenly",className:"weather-temperature"},r.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png"),alt:""}),r.a.createElement(S.a,{variant:e.isFavorite?"h3":"h1",component:"h2"},a,"\xb0C")),r.a.createElement(w.a,{only:"xs"},r.a.createElement(f.a,{container:!0,item:!0,sm:1,justify:"flex-end"},e.isFavorite&&r.a.createElement(O.a,{color:"primary",size:"small",onClick:e.onRemoveCityClick.bind(this,e.cityWeatherData.name)},r.a.createElement(x.a,null))))),r.a.createElement(f.a,{item:!0,xs:12,md:e.isFavorite?12:6,className:"weather-items"},r.a.createElement(j.a,{elevation:1,className:"weather-item"},r.a.createElement("span",null,r.a.createElement("b",null,"\u0412\u0435\u0442\u0435\u0440")),r.a.createElement("span",null,t.wind.speed," \u043c/\u0441")),r.a.createElement(j.a,{elevation:1,className:"weather-item"},r.a.createElement("span",null,r.a.createElement("b",null,"\u041e\u0431\u043b\u0430\u0447\u043d\u043e\u0441\u0442\u044c")),r.a.createElement("span",null,t.weather[0].description)),r.a.createElement(j.a,{elevation:1,className:"weather-item"},r.a.createElement("span",null,r.a.createElement("b",null,"\u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435")),r.a.createElement("span",null,t.main.pressure," hpa")),r.a.createElement(j.a,{elevation:1,className:"weather-item"},r.a.createElement("span",null,r.a.createElement("b",null,"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c")),r.a.createElement("span",null,t.main.humidity," %")),r.a.createElement(j.a,{elevation:1,className:"weather-item"},r.a.createElement("span",null,r.a.createElement("b",null,"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b")),r.a.createElement("span",null,"[",t.coord.lon,", ",t.coord.lat,"]"))))}return null}var _=a(194),N=a(211),R=a.n(N),T=a(9);function A(e){var t="";if(Array.isArray(e))t="https://api.openweathermap.org/data/2.5/weather?lat=".concat(e[0],"&lon=").concat(e[1],"&appid=263bacc60191ddc5e17b82d2d0c753d4");else{if("string"!==typeof e||!e.length)return;t="https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=263bacc60191ddc5e17b82d2d0c753d4")}return fetch(t).then((function(e){return e.json()}))}function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(T.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=a(106),M=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={enteredCity:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"removeCityFromFavorite",value:function(e){this.props.removeCity(e)}},{key:"onCityInput",value:function(e){var t=e.target.value;this.setState({enteredCity:t})}},{key:"handleCityFetchError",value:function(e){this.removeCityFromFavorite(e),this.props.enqueueSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u043e\u0433\u043e\u0434\u0443 \u0434\u043b\u044f \u0433\u043e\u0440\u043e\u0434\u0430 ".concat(e),{variant:"error",autoHideDuration:3e3})}},{key:"addCityToFavorite",value:function(e){e.preventDefault(),""!==this.state.enteredCity&&(this.props.addCity(this.state.enteredCity),this.setState({enteredCity:""}))}},{key:"render",value:function(){var e=this;return r.a.createElement(f.a,null,r.a.createElement(f.a,{container:!0,component:"section",alignItems:"center"},r.a.createElement(f.a,{item:!0,xs:12,sm:5},r.a.createElement(g.a,{variant:"h4",component:"h2"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435")),r.a.createElement(f.a,{container:!0,item:!0,xs:12,sm:7,className:"addCityInput"},r.a.createElement("form",{onSubmit:this.addCityToFavorite.bind(this)},r.a.createElement(_.a,{label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0433\u043e\u0440\u043e\u0434",placeholder:"\u0413\u043e\u0440\u043e\u0434",margin:"none",name:"city",value:this.state.enteredCity,onChange:this.onCityInput.bind(this)}),r.a.createElement(O.a,{size:"small",color:"primary",style:{marginTop:"0.5rem",marginLeft:"1rem"},type:"submit"},r.a.createElement(R.a,null))))),r.a.createElement(f.a,{container:!0,spacing:4,component:"section"},this.props.cities.map((function(t,a){return r.a.createElement(f.a,{key:a,item:!0,xs:12,md:6},r.a.createElement(W,{cityWeatherData:t,isFavorite:!0,onRemoveCityClick:e.removeCityFromFavorite.bind(e),onFetchError:e.handleCityFetchError.bind(e,t.name)}))}))))}}]),t}(r.a.Component),z=Object(C.withSnackbar)(Object(G.b)((function(e){return{cities:e}}),{addCity:function(e){return function(){var t=Object(s.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"ADD_CITY_LOADING",payload:{name:e,isLoading:!0}}),n=null,t.prev=2,t.next=5,A(e);case 5:200!=(n=t.sent).cod?a({type:"ADD_CITY_ERROR",payload:Y({name:e},n)}):a({type:"ADD_CITY_SUCCESS",payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a({type:"ADD_CITY_ERROR",payload:Y({name:e},n)});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},removeCity:function(e){return{type:"REMOVE_CITY",payload:e}}})(M)),U=Object(y.a)({breakpoints:{values:{xs:0,sm:480,md:960,lg:1280,xl:1920}}}),J=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={geoLocationStatus:"",currentLocationWeather:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getLocationWeather()}},{key:"getLocationWeather",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({currentLocationWeather:null}),!navigator.geolocation){e.next=5;break}navigator.geolocation.getCurrentPosition(function(){var e=Object(s.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,A([a.coords.latitude,a.coords.longitude]);case 3:e.t1=e.sent,e.t2={geoLocationStatus:"enabled",currentLocationWeather:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(s.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.code===a.PERMISSION_DENIED&&console.log("User denied the request for Geolocation."),e.t0=t,e.next=4,A("lodnon");case 4:e.t1=e.sent,e.t2={geoLocationStatus:"disabled",currentLocationWeather:e.t1},e.t0.setState.call(e.t0,e.t2);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=12;break;case 5:return console.log("Geolocation is disabled"),e.t0=this,e.next=9,A("London");case 9:e.t1=e.sent,e.t2={geoLocationStatus:"disabled",currentLocationWeather:e.t1},e.t0.setState.call(e.t0,e.t2);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(v.a,{theme:U},r.a.createElement(C.SnackbarProvider,{maxSnack:3},r.a.createElement(E.a,{maxWidth:"lg"},r.a.createElement(f.a,{container:!0,spacing:1,component:"section"},r.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(g.a,{variant:"h4",component:"h2"},"\u041f\u043e\u0433\u043e\u0434\u0430 \u0437\u0434\u0435\u0441\u044c")),r.a.createElement(f.a,{container:!0,item:!0,xs:12,sm:6,md:4},r.a.createElement(b.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:this.getLocationWeather.bind(this)},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e")),"disabled"===this.state.geoLocationStatus?r.a.createElement(f.a,{container:!0,item:!0,xs:12,sm:12,md:12},r.a.createElement(g.a,{variant:"h5",component:"h3",color:"error"},"\u0413\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430")):""),r.a.createElement(W,{key:"default",cityWeatherData:this.state.currentLocationWeather,isFavorite:!1}),r.a.createElement(z,null))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=a(61),B=a(212),V=a(213),H=a(13),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"ADD_CITY_SUCCESS"===t.type?e.map((function(e,a){return e.name.toLowerCase()===t.payload.name.toLowerCase()?t.payload:e})):"ADD_CITY_ERROR"===t.type?(console.log(t.payload),e.map((function(e,a){return e.name.toLowerCase()===t.payload.name.toLowerCase()?t.payload:e}))):"ADD_CITY_LOADING"===t.type?[].concat(Object(H.a)(e),[t.payload]):"REMOVE_CITY"===t.type?e.filter((function(e){return e.name!==t.payload})):e},K=localStorage["weather-cities"]?JSON.parse(localStorage["weather-cities"]):[],Q=Object(q.createStore)($,K,Object(V.composeWithDevTools)(Object(q.applyMiddleware)(B.a)));Q.subscribe((function(){localStorage["weather-cities"]=JSON.stringify(Q.getState())}));var X=Q;i.a.render(r.a.createElement(G.a,{store:X},r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[218,1,2]]]);
//# sourceMappingURL=main.e924828d.chunk.js.map